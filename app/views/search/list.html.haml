= render 'search/meta_tags'
- no_footer!

- content_for :hero do
  = render 'search/header'
  #search-result-google-map{:'data-marker' => image_path("components/map-pin.png")}
    #search-result-movable-google-map{:style => 'width: 100%; height: 100%;'}
- if !@searcher.transactable_type.display_taxonomy_tree? ||  request.xhr?
  = render 'search/list_results', searcher: @searcher
- else
  .category-container.list-search-left{"data-search-filters-container" => true}
    %section#category-tree.list-view-category-tree{ class: @transactable_type.show_price_slider ? 'with_slider' : '' }
      - cache i18n_cache_key(@searcher.transactable_type, @searcher.category_ids) do
        - @searcher.searchable_categories.each do |category|
          .nav-categories.collapse.in
            %ul
              %li.nav-heading
                = label_tag "category_#{category.id}" do
                  - if @searcher.transactable_type.category_search_type == "OR"
                    = check_box_tag("category_ids[]", category.id, @searcher.category_ids.include?(category.id.to_s), id: "category_#{category.id}")
                  - else
                    = check_box_tag("parent_category_ids[]", category.id, @searcher.category_ids.include?(category.id.to_s), hidden: true, id: "category_#{category.id}")
                  = category.translated_name
              = category_tree(category, @category, 3, @searcher.category_ids)
  = render 'search/list/search_filters_boxes'

  .listing-container.list-search-right
    = render 'search/list_results', searcher: @searcher
    = render 'search/footer'

- content_for :domready do
  $(document).trigger('init:list:searchresults.nearme');
